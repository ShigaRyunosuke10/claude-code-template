{
  "$schema": "https://claude.com/schemas/settings.json",
  "description": "Phase 3: Full Autonomousï¼ˆWeek 5+ï¼‰- å…¨æ©Ÿèƒ½æœ‰åŠ¹åŒ–",
  "phase": 3,
  "phaseName": "Full Autonomous",
  "duration": "Week 5+",
  "enabled": true,

  "features": {
    "stopRuleDetection": true,
    "autoHealing": true,
    "learningMemory": true,
    "quarantine": true,
    "telemetry": true
  },

  "healerConfig": {
    "mode": "full-autonomous",
    "knownFixesEnabled": true,
    "conservativeFixesEnabled": true,
    "hypothesisFixesEnabled": true,
    "maxHealingAttempts": 3,
    "smokeTestRequired": true
  },

  "stopConditions": [
    {
      "name": "identical-error-streak",
      "enabled": true,
      "threshold": 3,
      "action": {
        "type": "halt",
        "message": "ğŸ¤– [AUTO] åŒä¸€ã‚¨ãƒ©ãƒ¼3é€£ç¶š â†’ å®Œå…¨è‡ªå¾‹ä¿®å¾©é–‹å§‹"
      }
    },
    {
      "name": "high-failure-rate",
      "enabled": true,
      "window": 10,
      "threshold": 0.3,
      "action": {
        "type": "halt",
        "message": "ğŸ¤– [AUTO] å¤±æ•—ç‡30%è¶… â†’ å®Œå…¨è‡ªå¾‹ä¿®å¾©é–‹å§‹"
      }
    },
    {
      "name": "timeout-cascade",
      "enabled": true,
      "pattern": "waitForURL|waitForSelector",
      "count": 5,
      "window": "3min",
      "action": {
        "type": "halt",
        "message": "ğŸ¤– [AUTO] ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆé€£é– â†’ å®Œå…¨è‡ªå¾‹ä¿®å¾©é–‹å§‹"
      }
    },
    {
      "name": "spec-total-failure",
      "enabled": true,
      "failureRate": 0.8,
      "minTests": 5,
      "action": {
        "type": "halt",
        "message": "âš ï¸ [QUARANTINE] specå…¨æ»… â†’ æ¤œç–«é–‹å§‹"
      }
    },
    {
      "name": "insurance-failure-limit",
      "enabled": true,
      "threshold": 10,
      "action": {
        "type": "halt",
        "message": "ğŸ¤– [AUTO] å…¨ä½“å¤±æ•—10ä»¶è¶… â†’ å®Œå…¨è‡ªå¾‹ä¿®å¾©é–‹å§‹"
      }
    }
  ],

  "healingStrategy": {
    "knownFixes": {
      "enabled": true,
      "source": ".serena/memories/testing/e2e_patterns.json",
      "enforcedOnly": false,
      "minSuccessRate": 0.7,
      "priority": 1
    },
    "conservativeFixes": {
      "enabled": true,
      "methods": [
        "selectorFallback",
        "timeoutExtension",
        "waitForLoadState"
      ],
      "priority": 2
    },
    "hypothesisFixes": {
      "enabled": true,
      "maxAttemptsPerTest": 1,
      "methods": [
        "nthSelector",
        "pageReload",
        "retry"
      ],
      "priority": 3
    }
  },

  "smokeTest": {
    "enabled": true,
    "tag": "@smoke",
    "passThreshold": 1.0,
    "onFailAction": "quarantine"
  },

  "quarantine": {
    "enabled": true,
    "outputPath": ".serena/memories/testing/quarantine/",
    "medianDuration": "3days",
    "notifyHuman": true,
    "autoEscalate": true
  },

  "learningMemory": {
    "enabled": true,
    "outputPath": ".serena/memories/testing/e2e_patterns.json",
    "minOccurrencesForPattern": 2,
    "enforceThreshold": 3,
    "pruneOldPatterns": true,
    "maxPatternsStored": 100
  },

  "safetyGuards": {
    "falsePositiveRateThreshold": 0.01,
    "resourceProtection": {
      "maxCpuPercent": 80,
      "maxMemoryPercent": 90
    },
    "infiniteFixPrevention": {
      "maxFixesPerTest": 3,
      "maxFixesPerSession": 50
    }
  },

  "telemetry": {
    "enabled": true,
    "metrics": [
      "healingAttempts",
      "healingSuccessRate",
      "knownFixApplicationCount",
      "conservativeFixApplicationCount",
      "hypothesisFixApplicationCount",
      "smokeTestResults",
      "mttr",
      "wastedExecution",
      "recurrenceRate",
      "falsePositiveRate",
      "quarantineMedian"
    ],
    "outputPath": ".serena/memories/testing/phase3_telemetry.json",
    "reportingInterval": "daily"
  },

  "objectives": [
    "å®Œå…¨è‡ªå¾‹ä¿®å¾©ã®å®Ÿç¾ï¼ˆäººé–“ä»‹å…¥ãªã—ï¼‰",
    "MTTR â‰¤30åˆ†ã®å®‰å®šé”æˆ",
    "Recurrence Rate <5%ï¼ˆå†ç™ºç‡ä½æ¸›ï¼‰",
    "False Positive Rate <1%ï¼ˆèª¤ä¿®æ­£é˜²æ­¢ï¼‰"
  ],

  "successCriteria": {
    "healingSuccessRate": ">=90%",
    "mttr": "<=30min",
    "recurrenceRate": "<5%",
    "falsePositiveRate": "<1%",
    "quarantineMedian": "<=3days"
  }
}
